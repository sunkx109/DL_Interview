## 实习项目总结

1. 对于量化，你认为未来的一个发展方向？

​       混合精度量化、超低精度量化

2. 后量化的流程，calibrate怎么做

   > https://zhuanlan.zhihu.com/p/58182172

   * min-max: min-max量化就是直接统计float的最大最小值.

   * KL散度 量化: 因为有些数据可能比较离散，所以单纯的统计max-min会导致量化损失较大，所以KL散度量化实际上就是选择一个阈值|T|，作为浮点的区间来进行量化。

     而对于KL散度量化的流程如下

     首先需要选择一个具有代表性，多样性，最好是验证集的一个子集作为calibration dataset，然后循环进行下裂的操作

     1. 首先不断地截断参考样本P，**长度从128开始到2048**，为什么从128开始呢？因为截断的长度为128的话，那么我们直接一一对应就好了，完全不用衰减因子了；
     2. 将截断区外的值全部求和；
     3. 截断区外的值加到截断样本P的最后一个值之上；（截断区之外的值为什么要加到截断区内最后一个值呢？我个人理解就是有两个原因，其一是求P的概率分布时，需要总的P总值，其二将截断区之外的加到截断P的最后，这样是尽可能地将截断后的信息给加进来。）
     4. 求得样本P的概率分布；
     5. 创建样本Q，其元素的值为截断样本P的int8量化值；
     6. 将Q样本长度拓展到 i ，使得和原样本P具有相同长度；
     7. 然后就求P、Q的KL散度值就好啦~

不断地构造P和Q，并计算相对熵，然后找到最小（截断长度为m）的相对熵，此时表示Q能极好地拟合P分布了。

3. 量化加速的原因

 除了内存占用的原因，其实在计算整形和浮点型时的周期基本差不多，但是取址操作